<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quick Survey</title>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f5f5f7; color: #1d1d1f; padding: 20px; max-width: 600px; margin: 0 auto; }
h1 { font-size: 24px; margin-bottom: 8px; }
.subtitle { color: #86868b; margin-bottom: 24px; font-size: 15px; }
.question { background: #fff; border-radius: 12px; padding: 20px; margin-bottom: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); }
.question h3 { font-size: 16px; margin-bottom: 12px; font-weight: 600; }
.question .note { font-size: 13px; color: #86868b; margin-bottom: 8px; }
label { display: block; padding: 10px 12px; margin: 4px 0; border-radius: 8px; cursor: pointer; font-size: 15px; transition: background 0.15s; }
label:hover { background: #f0f0f5; }
input[type="radio"], input[type="checkbox"] { margin-right: 10px; accent-color: #0071e3; }
.submit-btn { display: block; width: 100%; padding: 16px; background: #0071e3; color: #fff; border: none; border-radius: 12px; font-size: 17px; font-weight: 600; cursor: pointer; margin-top: 24px; }
.submit-btn:hover { background: #0077ED; }
.submit-btn:disabled { background: #86868b; cursor: not-allowed; }
.result { display: none; background: #fff; border-radius: 12px; padding: 24px; margin-top: 24px; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.08); }
.result h2 { margin-bottom: 12px; }
.result .code { background: #f5f5f7; padding: 16px; border-radius: 8px; font-family: monospace; font-size: 14px; word-break: break-all; margin: 16px 0; user-select: all; }
.result .copy-btn { padding: 12px 24px; background: #34c759; color: #fff; border: none; border-radius: 8px; font-size: 15px; cursor: pointer; }
.progress { font-size: 13px; color: #86868b; text-align: right; margin-bottom: 8px; }
</style>
</head>
<body>
<h1>Cognitive Profile Survey</h1>
<p class="subtitle">15 quick multiple-choice questions about working with Mike. Takes ~3 minutes. Your answers are private.</p>

<div id="progress" class="progress"></div>
<form id="survey">
</form>

<button class="submit-btn" id="submitBtn" onclick="submitSurvey()" disabled>Submit</button>

<div class="result" id="result">
<h2>âœ… Done!</h2>
<p>Send this code back to Mike:</p>
<div class="code" id="codeOutput"></div>
<button class="copy-btn" onclick="copyCode()">Copy Code</button>
<p style="margin-top:12px; color:#86868b; font-size:13px;">Just paste it in your text conversation.</p>
</div>

<script>
const questions = [
  {q: "Under pressure at work, Mike tends to:", opts: ["Take on more and speed up", "Go quiet and focus deeply on one thing", "Get more direct or short", "Seem the same but subtle things shift", "Depends on the situation"]},
  {q: "When the team is under a tight deadline, his first move is:", opts: ["Take charge and delegate", "Dive into the work himself", "Rally the team and check in on people", "Get strategic -- reprioritize and cut scope", "Stay calm and let the process work"]},
  {q: "His communication style in meetings is:", opts: ["Direct and to the point", "Asks a lot of questions first", "Big picture, connects ideas across topics", "Quiet until he has something specific to say", "Adapts to whoever he's talking to"]},
  {q: "How he handles disagreement on the team:", opts: ["Addresses it head-on", "Listens to all sides then decides", "Finds a creative middle ground", "Lets people work it out themselves", "Picks his battles carefully"]},
  {q: "His leadership style is closest to:", opts: ["Coach -- develops people through challenges", "Strategist -- always thinking three moves ahead", "Builder -- creates systems and processes", "Connector -- brings the right people together", "Mix depending on what's needed"]},
  {q: "Working with Mike feels like:", opts: ["Co-strategist -- thinking through problems together", "High energy -- lots of ideas, fast pace", "Steady hand -- calm and structured", "Mentor -- you learn a lot", "Mix depending on the project"]},
  {q: "What he's best at professionally:", opts: ["Seeing patterns others miss", "Breaking down complex problems", "Getting people aligned on a direction", "Building things from scratch", "Making the complicated feel simple", "Connecting ideas across different domains"]},
  {q: "Where he could improve as a leader:", opts: ["Takes on too much himself", "Could delegate more", "Moves fast, doesn't always bring everyone along", "Could slow down and celebrate wins more", "Could be more patient with slower processes", "Nothing major comes to mind"]},
  {q: "How he reacts when something goes wrong:", opts: ["Immediately starts problem-solving", "Stays calm, almost too calm", "Gets frustrated but channels it into action", "Takes responsibility even when it's not his fault", "Depends on the severity"]},
  {q: "His biggest professional blind spot:", opts: ["Doesn't realize how much he takes on", "Assumes others see what he sees", "Moves to the next thing before finishing the last", "Underestimates his own impact", "Hard to tell -- pretty self-aware", "Not sure"]},
  {q: "When he's excited about an idea, he:", opts: ["Starts building it immediately", "Talks through it with anyone who'll listen", "Maps it out strategically before acting", "Gets quiet and researches deeply", "All of the above at different times"]},
  {q: "How he's changed professionally since you've known him:", opts: ["More focused and strategic", "More confident in his direction", "Taken on bigger challenges", "Hasn't changed much -- consistent", "Hard to say, haven't known him long enough"]},
  {q: "His unrecognized strength at work:", opts: ["Cares more about the team than he shows", "Sees connections others miss", "Calm under pressure", "More creative than people realize", "Makes others feel capable", "Asks the right questions"]},
  {q: "One thing that makes him different from other leaders:", opts: ["Actually listens", "Thinks in systems, not just tasks", "Willing to challenge the status quo", "Invests in people without expecting credit", "Balances technical depth with big picture", "Hard to pin down one thing"]},
  {q: "If you could tell him one professional thing:", opts: ["You're a strong leader, trust it", "You don't have to carry everything yourself", "The team sees how hard you work", "Slow down sometimes -- it's okay", "Your ideas have more impact than you think", "Keep doing what you're doing"]}
];

const form = document.getElementById('survey');
questions.forEach((q, i) => {
  const div = document.createElement('div');
  div.className = 'question';
  let html = `<h3>${i+1}. ${q.q}</h3>`;
  if (q.multi) html += `<div class="note">Pick up to ${q.max}</div>`;
  q.opts.forEach((opt, j) => {
    const type = q.multi ? 'checkbox' : 'radio';
    const name = `q${i}`;
    html += `<label><input type="${type}" name="${name}" value="${j}" onchange="checkProgress(${q.multi ? 'true' : 'false'}, '${name}', ${q.max || 0})">${opt}</label>`;
  });
  div.innerHTML = html;
  form.appendChild(div);
});

function checkProgress(isMulti, name, max) {
  if (isMulti && max) {
    const checked = document.querySelectorAll(`input[name="${name}"]:checked`);
    if (checked.length > max) {
      event.target.checked = false;
      return;
    }
  }
  let answered = 0;
  questions.forEach((q, i) => {
    const checked = document.querySelectorAll(`input[name="q${i}"]:checked`);
    if (checked.length > 0) answered++;
  });
  document.getElementById('progress').textContent = `${answered}/${questions.length} answered`;
  document.getElementById('submitBtn').disabled = (answered < questions.length);
}

function submitSurvey() {
  const answers = [];
  questions.forEach((q, i) => {
    const checked = document.querySelectorAll(`input[name="q${i}"]:checked`);
    if (q.multi) {
      answers.push(Array.from(checked).map(c => c.value).join('+'));
    } else {
      answers.push(checked[0]?.value || '0');
    }
  });
  const payload = 'epsilon|' + answers.join('|');
  const code = btoa(payload).replace(/=/g, '');
  document.getElementById('codeOutput').textContent = code;
  document.getElementById('result').style.display = 'block';
  document.getElementById('submitBtn').style.display = 'none';
  document.getElementById('result').scrollIntoView({behavior: 'smooth'});
}

function copyCode() {
  const code = document.getElementById('codeOutput').textContent;
  navigator.clipboard.writeText(code).then(() => {
    document.querySelector('.copy-btn').textContent = 'Copied!';
    setTimeout(() => document.querySelector('.copy-btn').textContent = 'Copy Code', 2000);
  });
}
</script>
</body>
</html>
